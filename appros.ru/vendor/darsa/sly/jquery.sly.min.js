/*! Sly v1.0.0-rc.2 17-Jan-2013 | https://github.com/Darsain/sly */
(function(g,F,O){function ca(f,b,pa){var v,k,w,da,m,q,F,G,N,S,la,qa,T,ra,ea,sa,P,U;function x(a,V,h){if(H&&(!V||h)){var ua=ta(a);Q?(a=l[ua.centerItem].center,I&&c.activate(ua.centerItem,1)):a>d.min&&a<d.max&&(a=l[ua.firstItem].start)}"slidee"===V&&b.elasticBounds&&!h?a>d.max?a=d.max+(a-d.max)/6:a<d.min&&(a=d.min+(a-d.min)/6):a=J(a,d.min,d.max);qa=+new Date;T=0;ra=d.cur;ea=a;sa=a-d.cur;U=(P=V)&&!h;d.dest=a;!U&&!fa&&c.cycle();g.extend(e,ta(void 0));ca();ga[0]&&K.page!==e.activePage&&(K.page=e.activePage,
ga.removeClass(b.activeClass).eq(e.activePage).addClass(b.activeClass));a!==d.cur&&!ha&&va()}function va(){ha?((U?"slidee"===P:33>b.speed)?d.cur=ea:U&&"handle"===P?d.cur+=(ea-d.cur)*b.syncFactor:(T=Math.min(+new Date-qa,b.speed),d.cur=ra+sa*jQuery.easing[b.easing](T/b.speed,T,0,1,b.speed)),ea===Math.round(d.cur)&&(U||T>=b.speed)?(d.cur=d.dest,ha=0,P||B("moveEnd")):ha=ma(va),B("move"),C||(L?r[0].style[L]=(b.horizontal?"translateX":"translateY")+"("+-d.cur+"px)":r[0].style[b.horizontal?"left":"top"]=
-Math.round(d.cur)+"px"),y&&(p.cur=d.min===d.max?0:(("handle"===P?d.dest:d.cur)-d.min)/(d.max-d.min)*p.max,p.cur=J(Math.round(p.cur),p.min,p.max),K.hPos!==p.cur&&(K.hPos=p.cur,L?y[0].style[L]=(b.horizontal?"translateX":"translateY")+"("+p.cur+"px)":y[0].style[b.horizontal?"left":"top"]=p.cur+"px"))):(ha=ma(va),P||B("moveStart"))}function wa(a){return W(a)?J(a,0,l.length-1):a===O?-1:s.index(a)}function X(a,b){return parseInt(a.css(b),10)}function ta(a){a=J(W(a)?a:d.dest,d.min,d.max);var b={},h=I?0:
z/2;if(!C)for(var c=0,f=t.length;c<f;c++){if(a>=d.max||c===t.length-1){b.activePage=t.length-1;break}if(a<=t[c]+h){b.activePage=c;break}}if(H){for(var f=c=h=!1,e=0,g=l.length;e<g;e++){!1===h&&a<=l[e].start&&(h=e);!1===f&&a-l[e].size/2<=l[e].center&&(f=e);if(e===l.length-1||!1===c&&a<l[e+1].end)c=e;if(!1!==c)break}b.firstItem=W(h)?h:0;b.centerItem=W(f)?f:b.firstItem;b.lastItem=W(c)?c:b.centerItem}return b}function ca(){if(H){var a=0===e.activeItem,c=e.activeItem>=l.length-1,h=a?"first":c?"last":"middle";
K.itemsButtonState!==h&&(K.itemsButtonState=h,Y.is("button,input")&&Y.prop("disabled",a),Z.is("button,input")&&Z.prop("disabled",c),Y[a?"removeClass":"addClass"](b.disabledClass),Z[c?"removeClass":"addClass"](b.disabledClass))}ga[0]&&(a=d.dest<=d.min,c=d.dest>=d.max,h=a?"first":c?"last":"middle",K.pagesButtonState!==h&&(K.pagesButtonState=h,$.is("button,input")&&$.prop("disabled",a),aa.is("button,input")&&aa.prop("disabled",c),$[a?"removeClass":"addClass"](b.disabledClass),aa[c?"removeClass":"addClass"](b.disabledClass)))}
function ka(a){return Math.round(J(a,p.min,p.max)/p.max*(d.max-d.min))+d.min}function xa(a){var c="touchstart"===a.type,h=a.data.src,e="slidee"===h;if(c||1>=a.which)A(a),v=h,w=k=0,da=c,m=(c?a.originalEvent.touches[0]:a)[b.horizontal?"pageX":"pageY"],q=e?d.cur:p.cur,F=+new Date,G=0,N=e?-m:-p.cur,S=e?document[b.horizontal?"width":"height"]-m:p.max-p.cur,la=g(a.target),(e?r:y).addClass(b.draggedClass),na.on(c?ya:za,Aa)}function Aa(a){w="mouseup"===a.type||"touchend"===a.type;G=J((da?a.originalEvent[w?
"changedTouches":"touches"][0]:a)[b.horizontal?"pageX":"pageY"]-m,N,S);if(!k&&Math.abs(G)>(da?50:10)||"handle"===v)k=1,"slidee"===v&&(oa=1),c.pause(1),la.on("click",function h(a){A(a,1);"slidee"===v&&(oa=0);la.off("click",h)}),B("moveStart",v);k&&(A(a),w&&("slidee"===v&&33<b.speed)&&(G+=200*G/(+new Date-F)),x("slidee"===v?Math.round(q-G):ka(q+G),v,w));w&&(na.off(da?ya:za,Aa),("slidee"===v?r:y).removeClass(b.draggedClass),B("moveEnd",v))}function B(a,c,h,g,l){switch(a){case "active":h=c;c=s;break;
case "activePage":h=c;c=t;break;default:l=c,c=d,h=s,g=e}if(u[a])for(var j=0,n=u[a].length;j<n;j++)u[a][j].call(f,c,h,g,l);b.domEvents&&!C&&D.trigger(ia+":"+a,[c,h,g,l])}b=g.extend({},g.fn[ia].defaults,b);var c=this,C=W(f),na=g(document),D=g(f),r=D.children().eq(0),z=0,n=0,d={cur:0,dest:0,max:0,min:0},E=g(b.scrollBar).eq(0),y=E.length?E.children().eq(0):0,ja=0,R=0,p={cur:0,max:0,min:0},ba=g(b.pagesBar),ga=0,t=[],Ea="basic"===b.itemNav,Ba="smart"===b.itemNav,I="forceCentered"===b.itemNav,Q="centered"===
b.itemNav||I,H=!C&&(Ea||Ba||Q||I),s=0,l=[],e={firstItem:0,lastItem:1,centerItem:1,activeItem:-1,activePage:0,items:0,pages:0},Ca=b.scrollSource?g(b.scrollSource):D,Fa=b.dragSource?g(b.dragSource):D,Y=g(b.prev),Z=g(b.next),$=g(b.prevPage),aa=g(b.nextPage),u={},K={};la=S=N=G=F=q=m=da=w=k=v=U=P=sa=ea=ra=T=qa=void 0;var Da="touchstart."+j+" mousedown."+j,za="mousemove."+j+" mouseup."+j,ya="touchmove."+j+" touchend."+j,ha=0,M=0,fa=0,oa=0,Ga=c.reload=function(){var a=0;d.old=g.extend({},d);z=C?0:D[b.horizontal?
"width":"height"]();ja=E[b.horizontal?"width":"height"]();n=C?f:r[b.horizontal?"outerWidth":"outerHeight"]();t=[];d.min=0;d.max=Math.max(n-z,0);K={};if(H){s=r.children(":visible");e.items=s.length;l=[];var V=X(r,b.horizontal?"paddingLeft":"paddingTop"),h=X(r,b.horizontal?"paddingRight":"paddingBottom"),j=X(s,b.horizontal?"marginLeft":"marginTop"),k=X(s.slice(-1),b.horizontal?"marginRight":"marginBottom"),v=0,pa="none"!==s.css("float"),a=j?0:k;n=0;s.each(function(a,c){var d=g(c),e=d[b.horizontal?"outerWidth":
"outerHeight"](!0),f=X(d,b.horizontal?"marginLeft":"marginTop"),d=X(d,b.horizontal?"marginRight":"marginBottom"),k={size:e,start:n-(!a||b.horizontal?0:f),center:n-Math.round(z/2-e/2),end:n-z+e-(j?0:d)};a||(v=-(I?Math.round(z/2-e/2):0)+V,n+=V);n+=e;!b.horizontal&&!pa&&d&&(f&&0<a)&&(n-=Math.min(f,d));a===s.length-1&&(n+=h);l.push(k)});r[0].style[b.horizontal?"width":"height"]=n+"px";n-=a;d.min=v;d.max=I?l[l.length-1].center:Math.max(n-z,0);e.activeItem>=l.length?c.activate(l.length-1):1===l.length&&
s.eq(e.activeItem).addClass(b.activeClass)}g.extend(e,ta(void 0));y&&(R=b.dynamicHandle?Math.round(ja*z/n):y[b.horizontal?"outerWidth":"outerHeight"](),b.dynamicHandle&&(R=J(R,b.minHandleSize,ja),y[0].style[b.horizontal?"width":"height"]=R+"px"),p.max=ja-R);if(!C){var m=0,k="",u=0;if(I)t=g.map(l,function(a){return a.center});else for(;m-z<d.max;){var w=Math.min(d.max,m);t.push(w);m+=z;if(m>d.max&&H&&d.max-w<(l[l.length-1].size-a)/2){t[t.length-1]=d.max;break}}if(ba[0]){for(a=0;a<t.length;a++)k+=b.pageBuilder(u++);
ga=g(k).appendTo(ba.empty())}}x(J(d.dest,d.min,d.max));e.pages=t.length;e.slideeSize=n;e.frameSize=z;e.sbSize=ja;e.handleSize=R;B("load")};c.getPos=function(a){if(a===O)return d;if(H)return a=wa(a),-1!==a?l[a]:!1;var c=r.find(a).eq(0);return c[0]?(a=b.horizontal?c.offset().left-r.offset().left:c.offset().top-r.offset().top,c=c[b.horizontal?"outerWidth":"outerHeight"](),{start:a,center:a-z/2+c/2,end:a-z+c,size:c}):!1};c.getRel=function(){return e};c.prev=function(){c.activate(e.activeItem-1)};c.next=
function(){c.activate(e.activeItem+1)};c.prevPage=function(){c.activatePage(e.activePage-1)};c.nextPage=function(){c.activatePage(e.activePage+1)};c.slideBy=function(a){x(d.dest+a)};c.slideTo=function(a){x(a)};c.toStart=function(a){a===O?x(d.min):Q||(a=c.getPos(a))&&x(a.start)};c.toEnd=function(a){a===O?x(d.max):Q||(a=c.getPos(a))&&x(a.end)};c.toCenter=function(a){a===O?x(Math.round(d.max/2+d.min/2)):(a=c.getPos(a))&&x(a.center)};c.activate=function(a,d){if(H&&a!==O){var h=wa(a),f=e.activeItem;e.activeItem=
h;s.eq(f).removeClass(b.activeClass);s.eq(h).addClass(b.activeClass);ca();h!==f&&B("active",h);d||(Q?c.toCenter(h):Ba&&(h>=e.lastItem?c.toStart(h):h<=e.firstItem?c.toEnd(h):c.cycle()))}};c.activatePage=function(a){a=J(a,0,t.length-1);x(t[a]);B("activePage",a)};c.cycle=function(a){if(b.cycleBy&&b.cycleInterval&&!("items"===b.cycleBy&&!l[0]||a&&fa))fa=0,M?M=clearTimeout(M):B("cycleStart"),M=setTimeout(function(){switch(b.cycleBy){case "items":c.activate(e.activeItem>=l.length-1?0:e.activeItem+1);break;
case "pages":c.activatePage(e.activePage>=t.length-1?0:e.activePage+1)}B("cycle")},b.cycleInterval)};c.pause=function(a){a||(fa=!0);M&&(M=clearTimeout(M),B("cyclePause"))};c.toggle=function(){c[M?"pause":"cycle"]()};c.set=function(a,c){g.isPlainObject(a)?g.extend(b,a):b.hasOwnProperty(a)&&(b[a]=c)};c.on=function(a,b){if("object"===typeof a)for(var d in a){if(a.hasOwnProperty(d))c.on(d,a[d])}else if(b instanceof Array){d=0;for(var e=b.length;d<e;d++)c.on(a,b[d])}else if("function"===typeof b){u[a]=
u[a]||[];d=0;for(e=u[a].length;d<e;d++)if(u[a][d]===b)return;u[a].push(b)}};c.off=function(a,b){if(u[a])if(b instanceof Array)for(var d=0,e=b.length;d<e;d++)c.off(a,b[d]);else if("function"===typeof b){d=0;for(e=u[a].length;d<e;d++)u[a][d]===b&&u[a].splice(d,1)}else u[a].length=0};c.destroy=function(){na.add(r).add(Ca).add(y).add(E).add(ba).add(Y).add(Z).add($).add(aa).unbind("."+j);Y.add(Z).add($).add(aa).removeClass(b.disabledClass);s&&s.eq(e.activeItem).removeClass(b.activeClass);ba.empty();C||
(D.unbind("."+j),r.add(y).css(L||(b.horizontal?"left":"top"),L?"none":0),g.removeData(f,j))};c.init=function(){c.on(pa);C||(D.css("overflow","hidden"),"static"===D.css("position")&&D.css("position","relative"),r.add(y).css(g.extend({position:"absolute"},b.horizontal?{left:0}:{top:0})));"static"===E.css("position")&&E.css("position","relative");Ga();H?c.activate(b.startAt):x(b.startAt);b.scrollBy&&Ca.bind("DOMMouseScroll."+j+" mousewheel."+j,function(a){if(d.min!==d.max){A(a,1);a=a.originalEvent;var f=
0;a.wheelDelta&&(f=0>a.wheelDelta/120);a.detail&&(f=0>-a.detail/3);H?(a=wa((Q?I?e.activeItem:e.centerItem:e.firstItem)+(f?b.scrollBy:-b.scrollBy)),c[Q?I?"activate":"toCenter":"toStart"](a)):c.slideBy(f?b.scrollBy:-b.scrollBy)}});if(b.clickBar&&E[0])E.on("click."+j,function(a){1>=a.which&&(A(a),x(ka((b.horizontal?a.clientX-E.offset().left:a.clientY-E.offset().top)-R/2)))});b.keyboardNavBy&&na.bind("keydown."+j,function(a){switch(a.which){case b.horizontal?37:38:A(a);c["pages"===b.keyboardNavBy?"prevPage":
"prev"]();break;case b.horizontal?39:40:A(a),c["pages"===b.keyboardNavBy?"nextPage":"next"]()}});if(b.prev)Y.on("click."+j,function(a){A(a);c.prev()});if(b.next)Z.on("click."+j,function(a){A(a);c.next()});if(b.prevPage)$.on("click."+j,function(a){A(a);c.prevPage()});if(b.nextPage)aa.on("click."+j,function(a){A(a);c.nextPage()});r.on("click."+j,"*",function(a){1>=a.which&&(this.parentNode===a.delegateTarget&&!oa)&&c.activate(this);oa=0});if(ba[0])ba.on("click."+j,"*",function(){c.activatePage(ga.index(this))});
if(b.dragging)Fa.on(Da,{src:"slidee"},xa);if(b.dragHandle&&y)y.on(Da,{src:"handle"},xa);if(b.cycleBy&&!C){if(b.pauseOnHover)D.on("mouseenter."+j+" mouseleave."+j,function(a){if(!fa)c["mouseenter"===a.type?"pause":"cycle"](1)});c[b.startPaused?"pause":"cycle"]()}return c}}function A(f,b){f=f||F.event;f.preventDefault?f.preventDefault():f.returnValue=!1;b&&(f.stopPropagation?f.stopPropagation():f.cancelBubble=!0)}function W(f){return!isNaN(parseFloat(f))&&isFinite(f)}function J(f,b,g){return f<b?b:
f>g?g:f}for(var ia="sly",j=ia,m=F.cancelAnimationFrame||F.cancelRequestAnimationFrame,ma=F.requestAnimationFrame,L,N=window,q=["moz","webkit","o"],ka=0,k=0,S=q.length;k<S&&!m;++k)ma=(m=N[q[k]+"CancelAnimationFrame"]||N[q[k]+"CancelRequestAnimationFrame"])&&N[q[k]+"RequestAnimationFrame"];m||(ma=function(f){var b=+new Date,g=Math.max(0,16-(b-ka));ka=b+g;return N.setTimeout(function(){f(b+g)},g)},m=function(f){clearTimeout(f)});m=["transform","webkitTransform","msTransform"];q=document.createElement("div");
k=0;for(S=m.length;k<S&&!L;k++)q.style[m[k]]!==O&&(L=m[k]);F.Sly=ca;g.fn[ia]=function(f,b){var k,m;if(!g.isPlainObject(f)){if("string"===typeof f||!1===f)k=!1===f?"destroy":f,m=arguments,Array.prototype.shift.call(m);f={}}return this.each(function(A,w){var q=g.data(w,j);!q&&!k?g.data(w,j,(new ca(w,f,b)).init()):q&&k&&q[k]&&q[k].apply(q,m)})};g.fn[ia].defaults={horizontal:0,itemNav:null,scrollBar:null,dragHandle:0,dynamicHandle:0,minHandleSize:50,clickBar:0,syncFactor:0.5,pagesBar:null,pageBuilder:function(f){return"<li>"+
(f+1)+"</li>"},prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5E3,pauseOnHover:0,startPaused:0,scrollBy:0,dragging:0,elasticBounds:0,speed:0,easing:"swing",scrollSource:null,dragSource:null,startAt:0,keyboardNavBy:0,domEvents:0,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}})(jQuery,window);
